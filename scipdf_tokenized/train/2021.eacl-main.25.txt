Evaluating the Evaluation of Diversity in Natural Language Generation
Despite growing interest in natural language generation ( NLG ) models that produce diverse outputs , there is currently no principled method for evaluating the diversity of an NLG system . In this work , we propose a framework for evaluating diversity metrics . The framework measures the correlation between a proposed diversity metric and a diversity parameter , a single parameter that controls some aspect of diversity in generated text . For example , a diversity parameter might be a binary variable used to instruct crowdsourcing workers to generate text with either low or high content diversity . We demonstrate the utility of our framework by : ( a ) establishing best practices for eliciting diversity judgments from humans , ( b ) showing that humans substantially outperform automatic metrics in estimating content diversity , and ( c ) demonstrating that existing methods for controlling diversity by tuning a " decoding parameter " mostly affect form but not meaning . Our framework can advance the understanding of different diversity metrics , an essential step on the road towards better NLG systems .
An important desideratum of natural language generation ( NLG ) systems is to produce outputs that are not only correct , but also diverse . For example , a dialog system ( Adiwardana et al , 2020 ) should permit many responses for the prompt " How are you today ? " . Similarly , we expect diverse responses in tasks such as story generation ( Li et al , 2018 ) , question generation ( Pan et al , 2019 ) and question answering ( Fan et al , 2019 ) . Despite growing effort to produce more diverse models ( Li et al , 2016c , a ; Holtzman et al , 2019 ; Du and Black , 2019 ) , there is no standard evaluation metric for measuring diversity . Thus , different papers evaluate diversity differently ( if at Set A Pretty much everything . Nothing , really . You wo n't believe what happened ! Why do you even care ? What were you doing that was more important than this ?
  Not much . It was pretty dull . Blah , you did n't miss anything . Not anything that important . Very little , it was uneventful . Figure 1 : Diversity metric evaluation : we show two sets of responses to the same question , generated by crowdsourcing workers . While both sets are diverse in terms of form , only set A is diverse in terms of content . Each graph presents the distribution over a diversity metric for sets with high content diversity ( blue ) and low content diversity ( orange ) . Distributions are approximated over 200 sets . We observe that the human score metric ( absDHS ) separates the two distributions , while an n - gram based metric ( distinct - n ) fails , illustrating that it does not capture content diversity . The dotted lines correspond to the specific sets A and B presented above . all ) , making it difficult to compare competing approaches ( Hashimoto et al , 2019 ) . Having a principled and consensual diversity evaluation metric is hence fundamental for the field of NLG . A key challenge in developing diversity evaluation metrics , is the difficulty in determining their efficacy . Unlike metrics for evaluating the quality of generated text , where one can measure correlation between a metric ( such as BLEU ( Papineni et al , 2002 ) ) and human judgement ( Zhang et al , 2019a ; Sagarkar et al , 2018 ) , it is unknown if hu - mans can reliably estimate diversity . In this paper , we propose a framework for evaluating diversity metrics ( Figure 2 ) . We assume that a tester ( human or model ) is generating sets of sentences , conditioned on some diversity parameter that controls the diversity of the output sentences . We evaluate the diversity of the sentences using a proposed metric , and measure correlation between the metric and the diversity parameter . High correlation indicates that the metric captures how the diversity parameter affects the model output . We instantiate this framework with two tests . As a preliminary step , we introduce the decoding test : the tester is a neural generation model and the diversity parameter is a decoding parameter , such as softmax temperature ( Ackley et al , 1985 ) . This parameter controls the skewness of the distribution in every generated token , and has been shown to affect model diversity ( Holtzman et al , 2019 ; Caccia et al , 2018 ) . Then , we turn the focus to content diversity , introducing the content test ( Figure 1 ) . Here , the tester is a human , and the diversity parameter is a binary variable , where the human is instructed to generate sets of sentences with either high or low diversity in content . We evaluate three families of popular diversity metrics with these tests : ( a ) n - gram - based metrics that estimate diversity based on surface patterns in a set of generated sentences , ( b ) neural metrics : we propose a reduction from evaluating sentence similarity to evaluating diversity , then evaluate diversity using state - of - the - art sentence similarity models , and ( c ) human evaluation : we explore multiple ways in which humans can be asked to estimate diversity , resulting in multiple Human Diversity Score ( HDS ) variations . Applying our tests leads to several findings : ( i ) In the decoding test , n - gram - based metrics correlate well with decoding parameters , such as softmax temperature . While the goal of our framework is to evaluate diversity metrics , this result lets us reflect back on the tester itself and conclude that decoding parameters predominantly control the form of text rather than content . ( ii ) Conversely , n - gram - based metrics perform poorly in the content test . While neural metrics outperform n - gram - based metrics , humans are substantially better than any automatic metric at detecting content diversity . This is illustrated in Figure 1 , where a human clearly distinguishes between sets that have high ( blue ) and low ( orange ) content diver - sity , while n - gram - based metrics fail to do so . Due to this gap , we construct a large dataset focused on content - diversity metrics . We release the Metrics for content Diversity ( McDiv ) benchmark , a challenge for research in diversity evaluation . To conclude , our main contributions are : A framework for evaluating diversity metrics . Tests instantiating this framework , measuring the sensitivity of metrics to diversity , with a focus on content diversity . Best practices for obtaining diversity evaluations from crowdsourcing workers . Establishing that humans outperform current automatic metrics in detecting content diversity . The McDiv dataset - a benchmark for content diversity aware metrics . The collected data , test scores and code are publicly available , 1 and can be used to easily compare new diversity metrics to existing results in our framework .
Recently , interest in diversity has increased ( Du and Black , 2019 ; Holtzman et al , 2019 ) , resulting in multiple proposals for its evaluation . We describe recent approaches , highlighting the need for a standard way to evaluate metrics . Perplexity is the standard metric in language modeling , measuring the proximity of a language model ( LM ) , P LM , to the true distribution , P ref , by approximating the cross - entropy H ( P ref , P LM ) with held - out data from P ref . Thus , perplexity captures to some extent diversity . For example , a dialog model that puts all probability mass on the output " I do n't know " for any given context will obtain infinite perplexity once it encounters any other response . This property makes perplexity popular in LM - based NLG models , and often it is the only reported measure for diversity ( Lewis et al , 2017 ; Fan et al , 2018 ; Wang et al , 2019 ; . However , perplexity does not purely measure diversity , and high perplexity does not entail low diversity . For example , a LM with a uniform distribution over the vocabulary for each decoded token has high diversity , but its perplexity will be extremely high , due to its low quality . Moreover , perplexity evaluates a LM , while the diversity of a NLG system is also strongly affected by the decoding procedure . For example , Top - k and nucleus sampling are popular decoding schemes that tradeoff quality and diversity by ignoring some of the LM probability mass ( Holtzman et al , 2019 ) . Last , some NLG models , such as Generative Adversarial Networks ( GANs ) ( Yu et al , 2017 ) are not language models . While one can approximate perplexity for such models ( Tevet et al , 2019 ) , ideally , a metric should not be tied to a model . N - gram - based metrics A popular metric is distinct n - grams ( Li et al , 2016b ) , which computes the proportion of unique n - grams out of the total number of n - grams in a set of generated sentences . Du≈°ek et al ( 2020 ) calculated Shannon entropy ( Manning et al , 1999 ) based on different n - grams as a measure of lexical diversity . Self - BLEU ( Zhu et al , 2018 ; Shu et al , 2019 ) measures the BLEU score of a generated sentence with respect to another generated sentence ( rather than a gold reference ) . High average Self - BLEU indicates high similarity between generated sentences and low diversity . In 5 we expand this idea and suggest a reduction from any similarity metric to a diversity metric . By design , n - gram based metrics are sensitive to diversity in the form of language , rather than its meaning . Embedding - based metrics A new line of metrics suggests to embed generated sentences in latent space , then evaluate them in this space . Du and Black ( 2019 ) suggest to cluster the embedded sentences with k - means , then use its inertia as a measure for diversity . Recently , Lai et al ( 2020 ) suggested to consider the volume induced by the embedded sentences as a diversity metric . asked humans to evaluate the internal diversity of a generated essay . Ghandeharioun et al ( 2019 ) let crowdsourcing workers interact with a dialog chat - bot , then asked them to evaluate the diversity of a single conversation . In contrast , this paper focuses on the diversity of different responses given a context , as in Zhang et al ( 2019b ) .
To conclude , increasing interest in diversity resulted in multiple proposed diversity metrics . However , there is no consensus on how to evaluate diversity and what each metric actually measures .
We now describe our framework for evaluating diversity metrics . Diversity has many facets : for in - stance , a set of sentences can be diverse in terms of their content , while another may have similar content , but diverse form ( Figure 1 ) . Our framework provides a way to evaluate metrics for different aspects of diversity under moderate assumptions . We define a diversity metric m div ( S c ) R as a function that takes a set of generated responses S c as an input , and outputs a diversity score . Each response s S c is generated for the same input context c , hence S c is a sample from a generative distribution P gen ( s | c ) . The overall diversity score of a generative model can be obtained by averaging m div over sets S c sampled from the model given multiple contexts c C. To evaluate m div ( ) , we assume access to some deterministic diversity parameter d that controls an aspect of diversity in S c . We test the relation between m div and the parameter d. By varying d and measuring m div , we can compute the correlation œÅ between m div and an aspect of diversity represented by d. Because our goal is to have metrics that rank the diversity of generated texts , we use Spearman 's œÅ rank correlation as our test score . Figure 2 illustrates the flow of a test in our framework . In practice , to control the diversity level of S c using d , we use a tester : a generative model that takes a context c and a diversity parameter d as input , and outputs a response set S c , d . We stress that the tester can be either a neural model or a human . A good tester should reliably represent the diversity level quantified by d. As a hypothetical example , c can be a movie name and d represent sentiment diversity , that is , the number of different sentiments in a collection of reviews S c . A human tester can observe c and d , and produce reviews accordingly ( such data can be easily mined from IMDB ) . A collection of such ( d , S c , d ) makes a test , in which the correlation between m div ( S c , d ) and d measures the sensitivity of m div to sentiment diversity . We now describe two tests that instantiate this framework , roughly corresponding to the two main aspects of diversity : form diversity and content diversity .
The diversity of a NLG system constructed from a LM depends on both the LM but also the decoding algorithm on top of it . For example , beam search approximates the most probable output , and dramatically reduces diversity . Conversely , sampling from the LM leads to high diversity , but low quality output ( Holtzman et al , 2019 ) . A popular method to control diversity in NLG systems is to vary some decoding parameter . Variations include ( a ) softmax temperature ( Ackley et al , 1985 ) , where a parameter œÑ controls the skewness of the softmax distribution at each step , ( b ) Nucleus ( Top - p ) sampling ( Holtzman et al , 2019 ) , where one samples at each step from the minimal set of most probable tokens whose cumulative probability is at least p , and ( c ) Top - k sampling , which samples from the top - k most probable tokens at each step . All methods skew the LM distribution in a way that avoids low - probability tokens and leads to higher quality ( Holtzman et al , 2019 ) , providing a decoding parameter that trades off quality and diversity ( Caccia et al , 2018 ) . In the decoding test ( decTest ) , we define the tester to be a LM , such as GPT - 2 ( Radford et al , 2019 ) , and the diversity parameter d to be a decoding parameter such as temperature . We check how different diversity metrics m div correlate with decoding parameters . This can shed light on the quality of the metrics , but also on how decoding parameters affect the output of a NLG system . The decoding test uses automatically - generated data that is cheap to produce , and decoding parameters that are well - known to control diversity . Thus , we view this test as a warm - up test to explore the strengths of our framework .
In the content test ( conTest ) , our goal is to evaluate how different diversity metrics capture the notion of content diversity . Measuring content diversity requires deep understanding of the semantics of responses in S c . To isolate content from form diversity , we aim to generate response sets with a similar level of form diversity , but where the level of content diversity is controlled by the diversity parameter d. In 6 , we will focus on whether automatic diversity metrics can perform as well as humans on the task of estimating content diversity .
One of the core questions we tackle is : Can humans evaluate diversity reliably ? Although a few papers ( Ghandeharioun et al , 2019 ; Zhang et al , 2019b ) asked humans to evaluate diversity , to the best of our knowledge no work thoroughly investigated this question . The importance of this question is clear when comparing to quality evaluation . There , human judgment is the gold standard , and automatic quality metrics are established by showing high correlation with human score . Thus , understanding if humans can judge diversity is important for improving diversity metrics . We use crowdsourcing workers 2 to compute a human diversity score : we show workers a context followed by a set of responses , and ask them to rate the diversity of the set . To establish best practices , we experiment with multiple variations of HDS ( detailed in 6.2 ) , asking humans to rate the diversity of a response set , and evaluating each practice with our framework . We focus on the following questions : Should humans rate diversity of a set or similarity between pairs in the set , from which diversity can be inferred ? ( tl ; dr : diversity ) Can humans evaluate different aspects of diversity well ? ( tl ; dr : not effectively ) Should humans rate the absolute diversity score of a set of sentences or rank whether one set is more diverse than another ? Here , we did not reach a conclusive result , and describe this experiment in the Appendix C. As a preliminary step , we conducted pilot experiments among a group of NLP graduate students . The main insights were : ( a ) humans are biased by quality : if a generated set has high diversity but low quality , humans will rate diversity low . To neutralize this , we explicitly ask workers to evaluate the quality of one of the responses in the set S c , and then instruct them to ignore quality in diversity questions ; ( b ) To make sure a worker reads the context c , we ask them to generate a sentence s before they rate diversity ; ( c ) It is difficult for workers to evaluate the diversity of a set with more than 10 responses . Our crowdsourcing tasks are provided in Appendix A.
We expand the idea from Zhu et al ( 2018 ) and suggest a method to construct a diversity metric from any 2 - sentence similarity metric . Given m sim ( s 1 , s 2 ) R , a symmetric similarity metric that gets a pair of input sentences ( s 1 , s 2 ) and returns a similarity score , we can define a diversity metricm div as the negation of the mean similarity score across all ( unordered ) pairs of S c : m div ( S c ) = ‚àí 1 | Sc | 2 s i , s j Sc , i > j m sim ( s i , s j ) . This reduction allows us to easily define new diversity metrics based on past work on sentence similarity ( Gomaa et al , 2013 ; Devlin et al , 2019 ; Zhang et al , 2019a ; Reimers and Gurevych , 2019 ) . In 6 we show that both n - gram - based similarity metrics and neural semantic similarity metrics provide useful diversity metrics . 6 Experiments
We apply our evaluation procedure on three different English NLG tasks that require diversity . Story completion ( storyGen ) ; We use the ROC Stories dataset ( Mostafazadeh et al , 2016 ) , in which the context c is the first four sentences of a story , and the response s is a single sentence that ends the story . We use the contexts C from this data and generate response sets S c for each context using our testers . The long contexts characterizing this data narrow down the space of possible responses , making this a " low - entropy " generation task , where the output is constrained , but diversity is still essential . Dialog response generation ( respGen ) ; A comment - response pairs dataset extracted from the website reddit.com and pre - processed by Hashimoto et al ( 2019 ) . We use the comments from their data as contexts C and generate response sets S c for each context using our testers . Since comments are single sentences the response is less constrained , making this a " medium - entropy " generation task . 3 - words prompt completion ( promptGen ) ; Contexts C are 3 - words prompts , extracted from the Cornell Movie - Dialogs Corpus ( Danescu - Niculescu - Mizil and Lee , 2011 ) by taking the first three words from each original context . The response sets S c are completions of the prompts , generated by our testers . This context provides minimal constraints , making this a " highentropy " generation task . Samples of the contexts extracted for each task , along with generated response sets , are presented in Appendix B. We intentionally avoid NLG tasks where diversity is not necessarily desired , such as summarization and machine translation .
N - gram - based metrics We evaluate distinct ngrams ( distinct - n ) , as described in 2 . We also evaluate n - grams cosine similarity ( cos - sim ) : a similarity measure computing the cosine between the vectors representing two sentences , where each vector is a count vector over the n - grams that appear in the response . We use the reduction from 5 to convert this to a diversity measure . In both metrics , rather than choosing the order of the ngrams , we average over n { 1 , . . . , 5 } , which we found to outperform any single choice of n. Neural metrics We exploit existing BERT - based models ( Devlin et al , 2019 ) fine - tuned for estimating similarity between two sentences ( applying the reduction from 5 ) . BERT - STS ; A BERT model fine - tuned on Semantic Textual Similarity ( Cer et al , 2017 ) : a collection of sentence pairs annotated with scores from 1 - 5 denoting their semantic similarity . 3 BERT - Score ( Zhang et al , 2019a ) ; Originally a quality metric , BERT - Score uses BERT 's embeddings to measure similarity between two sen - tences . We used RoBERTa - large , as suggested by the authors . 4 Sentence - BERT ( sent - BERT ) ( Reimers and Gurevych , 2019 ) is a sentence - level embedding model based on BERT . We use the cosine similarity between the embeddings of two responses as a similarity metric . In our experiments we used bert - large - nli - stsb - mean - tokens . 5 Human Metrics We examine four methods for evaluating diversity with humans ( see 4 ) , to investigate best practices for obtaining diversity judgment from humans . In all metrics ( except ranking ) , ratings are from 5 ( highest diversity / similarity ) to 1 ( lowest ) . The original tasks presented to workers are in Appendix A. Absolute HDS ( absHDS ) ; Given a context c and a set of generated responses S c , rate the level of diversity of S c . Ranking HDS ( rnkHDS ) ; Given a context c and two sets S c , d 1 , S c , d 2 generated with different values of the diversity parameter d , rate which set is more diverse . Since this metric did not clearly outperform absHDS , we provide results in Appendix C only . Similarity HDS ( simHDS ) ; Given a context c and a set of generated responses S c , rate the similarity of each two sentences in S c , and then apply the reduction from 5 . Aspect HDS ( aspHDS ) ; Identical to absHDS , except we explicitly ask about a specific aspect of diversity , namely form and content . 6
In decTest we measure the correlation between diversity metrics ( m div ) and the softmax temperature decoding parameter ( d ) . The tester generating the response sets ( S c ) is a neural NLG model . Response set ( œÑ = 0.25 ) It was a minor fire and they put it out . It was a fire . It was a fire . It was a fire . It was a fire . Response set ( œÑ = 0.8 ) They arrived and put out the fire . It was a fire . It was a fire . It turned out to be a fire . It was a minor fire night . Response set ( œÑ = 1.1 ) It turned out to be a mechanic . Before the fire was put out it was a fire . It was a fire . They co - worker matter how bad the fire was . Several shells , the fire department came just in time . deviation . HDS metrics are computed over one experiment of 200 sets , due to their high cost . Data for storyGen and respGen was generated by the MASS model , fine - tuned on each dataset . Data for promptGen was generated by GPT - 2 - large ( Radford et al , 2019 ) without fine - tuning . We provide examples for how story endings change as a function of temperature in Table 1 . Examples for all tasks along with additional reproducibility details are in the Appendix B. For each HDS metric , we collected 10 ratings per query from Amazon Mechanical Turk ( AMT ) workers . While absHDS demands one query per response set , in order to perform simHDS at a reasonable cost , we chose | S c | = 5 , resulting in 5 2 = 10 crowdsourcing queries instead of 10 2 = 45 per set . We evaluate simHDS only for respGen due to the metric 's high cost and low performance . Results Table 2 presents results of absHDS , simHDS , and all automatic metrics . In general , ngram based metrics capture the diversity induced by a temperature sweep , beating HDS and neural metrics . Figure 3 provides a more detailed analysis . Each point represents a single set of responses generated at some temperature . While rank correlation for cosine similarity is high , it is While our framework is meant to evaluate diversity metrics , the results of the test let us reflect on the decoding parameters themselves . This result shows that humans perform worse than automatic metrics in this experimental setup , hinting that temperature mostly controls superficial changes to the generated text . Additionally , simHDS performs worse than absHDS although it is 3x more expensive , showing that rating the entire set rather than averaging over pairs is useful . Other decoding parameters To compare the robustness of our conclusions to other decoding parameters , we repeat it with two additional decoding methods : ( a ) in Nucleus ( Top - p ) sampling we swept linearly over 100 values of p in the range [ 0.1 , 1.0 ] ; ( b ) In Top - k sampling we swept k in logarithmic scale over 100 values in the range [ 1 , 30 K ] and present the correlation between the metrics and log 10 ( k ) . While softmax temperature enables skewing P LM to a more diverse P gen using œÑ > 1 , both Top - p and Top - k enable only skewing P LM to a more sharp ( hence less diverse ) P gen . Table 3 presents results for all automatic metrics using the three decoding methods over prompt - Gen. Results for other tasks are in Appendix C. We find that Top - p correlates well with temperature along all three generation tasks , whereas Topk does not correlate with any of them .
In conTest , we measure the correlation between diversity metrics ( m div ) and content diversity , represented by a binary parameter d { 0 , 1 } . The testers are AMT workers , guided to create sets with high level of form diversity and high or low content diversity according to d.
For each task , we collected 200 sets of 5 responses each ( 100 sets per class ) . For high content diversity class , we asked workers to give 5 responses per context , with as different content and structure as possible . Then we asked the same workers to choose a single response they wrote , and rephrase it 5 times such that the original content will be preserved , while changing the form - this set is used for the low content diversity class . A sample from this data is in Figure 1 and more samples in Appendix B. For each HDS metric , we collected 10 ratings from crowdsourcing workers , different than the ones who composed the sets .
In addition to Spearman 's œÅ , we report the optimal single - threshold classifier accuracy ( OCA ) , i.e. , the best achievable accuracy in predicting the class of a response set ( high or low content diversity ) for any threshold Œ∑ on m div , such that if m div ( S c ) > Œ∑ the classifier predicts high diversity , and otherwise predicts low diversity . Table 4 shows the results . N - gram - based metrics perform poorly , indicating they do not measure content diversity well . Neural models perform better than n - gram - based metrics ( especially sent - BERT ) , but there is still a clear gap between automatic metrics and humans . Figure 4 illustrates the typical distributions of n - gram , neural and human metrics . Clearly , HDS separates high and low content diversity better than neural metrics . In addition , n - gram - based metrics saturate both classes to near maximal values , similarly to decTest . Since conTest isolates content diversity , we used aspHDS to directly rate content and form diversity . Content aspHDS gets similar scores to ab - sHDS , suggesting little gain in asking directly on the tested aspect . Form aspHDS gets low scores compared to absHDS , validating that the form diversity of the two classes is similar . sets and 10 ratings per set for all experimentsthe minimal values in which results are confidently stable . Results are presented in Figure 5 .
In this work , we focused on the two primary aspects of diversity : content diversity ( What to say ? ) and form diversity ( How to say it ? ) . In Figure 1 , Both sets are diverse , but Set B is only form diverse , as all answers deliver the same massage , whereas Set A is diverse in both form and content . Furthermore , we can observe aspects of diversity as having a tree - like structure , where both content and form diversity can be divided to subaspects : Content diversity ( e.g. answering the question " How are you today ? " ) can be expressed by using different sentiment ( " I 'm doing good . " vs. " I 'm so glad you asked ! I 'm really doing good . " ) , different relevance ( " I 'm fine " vs. " Did you watch the game last night ? " ) , and more . Form diversity can be divided into sub - aspects as well : syntactic diversity ( " Someone took it from me . " vs. " It was taken from me . " ) or lexical diversity ( " I feel fine . " vs. " I feel very well . " ) . Even those sub - aspects can be further divided . For example , a sub - aspect of lexical diversity is register diversity ( " How are you ? " vs. " Sup bro ? " ) . Another observation is that different aspects are not orthogonal , that is , changing one aspect may lead to changes in other aspects . Specifically , we observe that while it is relatively easy to produce high form diversity with low content diversity ( Set B in Figure 1 ) , it is almost impossible to diversify content without changing form . This observation was important during the design of conTest .
This work presents a framework for evaluating diversity metrics as a step toward standardized evaluation . We limit the scope of this work to differ - ences between form and content diversity , which are key towards understanding different aspects of diversity . Future work can explore other aspects of diversity , e.g. testing sentiment diversity , as proposed in 3 . We urge researchers to use this framework as a platform for developing new diversity metrics and establishing their efficiency .
All Human scores for HDS metrics were collected using Amazon Mechanical Turk ( AMT ) crowdsourcing platform by English native - speaking workers that were specifically qualified for this task . Figure 7 presents the warm - up part , common for all HDS questionnaires . Before asking workers to rate the diversity of each set , we first asked them to generate a response for the context themselves , to make sure they read it . To neutralize the effect of the responses ' quality on the workers , we also asked the workers to rate the quality of the first response in the set , then explicitly instructed them to ignore quality when rating diversity . Figures 8 to 11 present the diversity questions of absHDS , aspHDS , rnkHDS and simHDS as appeared in the AMT questionnaires . Costs For HDS metrics that require one query per response set ( i.e. absHDS , rnkHDS , aspDHS ) , the cost for a single rating was 0.18$. We collected 10 ratings per response set , and conduct each experiment with 200 sets , hence the total cost for an experiment was 360$. In the case of simHDS , the response set size was 5 , and the number of queries needed per set is 5 2 = 10 . The cost of a single rating for this task was 0.056 $ , and with the same multipliers , the total cost for an experiment was 1120 $ , three times more expensive .
Tables 11 to 19 present data samples from sto - ryGen , respGen and promptGen with the neural testers of decTest , as detailed in 6 . Each table presents two contexts and three response sets per context . Each response set was generated with a different value of decoding parameter for the three decoding methods : softmax temperature , Nucleus sampling , and Top - k.
Tables 20 to 22 present data samples from sto - ryGen , respGen and promptGen with the human testers of conTest , as detailed in 6 . Each table presents two contexts and two response sets per context - one for the low content diversity class and one for the high content diversity class .
Comparing decTest results of storyGen to other tasks ( Table 2 ) , this task is characterised with noisier scores for all metrics ( Figures 3 and 6 ) , hence lower œÅ values and higher variance . A possible explanation is larger effect of c on the distribution P gen ( s | c ) in this task . Tables 3 , 6 and 7 , present decTest absolute scoring experiment using temperature , nucleus sampling and Top - k decoding parameters as d. Top - k consistently yields lower œÅ compared to other decoding parameters , especially for storyGen task . This implies that Top - k represents diversity less reliably than other methods . Ranking experiment To examine whether we can improve correlation by asking humans to rank diversity , rather than providing an absolute score , we designed a ranking version of decTest . Each context is given along with two sets ( 5 samples each ) , produced with different temperature values . We sweep over temperature differences instead of the absolute temperature values . The human metric in this setting is rnkHDS ( see 6.2 ) , and the automatic metrics are the difference between the scores each of the two sets got . We report two measures ; The first is Spearman 's œÅ between the metric and the temperature difference . The second is accuracy , i.e. , whether the metric can predict which set has higher temperature ( e.g. , in automatic metrics this is whether the sign of the temperature difference and the sign of metric score difference agree ) . 7 Table 5 summarizes the ranking test results . We observe that humans are better at ranking compared to giving absolute scores ( Table 2 ) , and are doing as well as automatic metrics . However , the scores of all automatic metrics also improve , making it difficult to separate between the different metrics .
As elaborated in 6 . tion between temperature differences and each metric score . Accuracy ( acc ) of classifying which set has the higher temperature . Standard deviation is up to 0.02 for all automatic metrics for both Spearman 's correlation and accuracy . metric to score zero correlation in conTest over this subset . The method of sub - sampling was meant to approximately equalize the distributions of the two classes , low and high content diversity , over the scores of distinct - n metric , and was performed as follows : Sort all collected samples ( from both low and high content diversity classes ) according to their distinct - n score . Divide the sorted samples to groups with fixed size ( 40 samples each in our case ) . From each such group , randomly sample the same amount of samples for each of the two classes . For example , if a group contains 5 low content diversity samples and 35 high content diversity samples , we can sample at most 5 samples for each class .
We applied conTest for all the collected data for each of the three NLG tasks ( see Tables 8 and 9 10 ) . Compared to Table 4 , The gap between the best performing neural metrics ( sent - BERT ) and absHDS was increased in favor to HDS ( 0.04 compared to 0.1 difference in Spearman 's œÅ ) .
Collected data and code All the collected data , metric scores per samples for each of decTest and conTest , as well as code for running and visualizing the tests , are publicly available 8 . The collection methods are elaborated in Section 6 . Original data We provide additional data for the original three datasets used in Section 6 . ROC Stories dataset 9 ( Mostafazadeh et al , 2016 ) used for storyGen task contains 96K/1K/1 K train / validation / test titles and five - sentence stories . We used the samples without pre - processing for both fine - tuning MASS model and generate samples for our tests . Reddit comment - response dataset used for respGen task contains 37 M /1 M /1 M train / validation / test comment - response pairs , extracted from the social website reddit.com scraped by pushshift.io followed by the pre - process described in ( Hashimoto et al , 2019 ) . We used the samples without further processing for both fine - tuning MASS model and generate samples for our tests . To the best of our knowledge , this dataset is not publicly available at the moment . CMDC dataset 10 ( Danescu - Niculescu - Mizil and Lee , 2011 ) contains 108K/30 K train / test sentence - response pairs extracted from movie scripts . We extracted the first three words from the sentences ( used as contexts for the original task ) to be the context of our task . We did not use this data for training since we used GPT - 2 without fine - tuning for promptGen . Auto - generated data For decTest , we used two pre - trained generative models for generating responses given the contexts : For storyGen and respGen tasks , we used MASS 11 He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He did not get to the meeting anymore . He missed his meeting . He passed out and failing the meeting He missed his meeting . He missed his meeting . He missed his meeting . He missed his meeting . He passed out and was kicked out of the meeting . He missed his meeting . He missed his meeting . Family Night Food . Tonight , my mom ordered Mexican food for family night . She got it from my favorite Mexican place in town . When it arrived , it was hot and smelled wonderful . We devoured it with gusto . After a few hours of take it home we all enjoyed its night . After a few hours of take it home we all enjoyed its night . After a few hours of take it home we all enjoyed its night . After a few hours of eating everyone was satisfied . After a few hours of take it home we all enjoyed its night . After a few hours of eating everyone was satisfied . After a few hours of take it home we all enjoyed its night . After a few hours of take it home we all enjoyed its night . After a few hours of take it home we all enjoyed its night . After a few hours of eating everyone was satisfied . After dinner , we all went home to cook Mexican food . After a few hours of cooking she was tired and ready to eat . After dinner , I always put got ready for Christmas . After dinner , I helped her do the dishes . After a few hours of dinner , the food was amazing . After a few hours of take it home we all enjoyed margaria . After dinner , I was ready to take on work the next day of After dinner , I was sad to say goodbye to her After a few hours of take it home we all enjoyed one bite . After a few hours of eating everyone was satisfied . Even though my stomach was gone , I was sad it was finally pockets After dinner , I alone . All in all the family while my mom finished the food . After a few hours of dancing , she pianed . Afterwards I 'd never finish single night a week . Afterwards we all went to sleep in my woods . Afterwards I helped her do much better than my wife . Afterwards my mom helped me finish my dinner . After a few hours we all enjoyed storm blood from the Italy . After dinner , we all enjoyed some good food together . The worker is asked to generate response of hers / his own and rate the quality of the tester 's response . So that 's the first time you want to punch somebody , not miss before . " The Seahawks would ! So that 's the science behind the Broadwell - E processors from Intel that Intel launched last fall ! So that 's the instinct from other teams , that they 're a headache . - Ramsay MacDonald , ! So that 's the white whale right there about too much debt . And then what you ! So that 's the end of our discussion about the causes . What happens when we look at the ! So that 's the cover of inhibition against " chronic " or " adaptive " stimulants ! So that 's the way the story goes , but exactly how is cloud providers going to restrict Their ! So that 's the beginning , the beginning of the show , I guess five minutes . " ! So that 's the Indie Mobile Game Week Honoring Winners ! ! ! ! ! ! ! ! ! So that 's the reason I 'm writing , that 's why you do n't understand why people know ! do you listen to the music ? " " I do n't know . I do n't listen ! do you listen to them ? " " I do , " he said . " I 'm not ! do you listen to the voices of the people ? " " I do , " said the king ! do you listen to the song ? " " I do n't know . I do n't know ! do you listen to the music ? " " I do . " " You 're not ! do you listen to the news ? I do . I 'm a big fan of the ! do you listen to me ? " " Yes , I do . " " I 'm ! do you listen to the other side ? " " I do n't know . I do n't ! do you listen to the other side ? " " I do , " said the boy . " ! do you listen to the news ? No , I do n't . I do n't listen ! do you listen to the current draft ? I listen to the current draft . I 'm ! do you listen to it ? " It 's easy to hear the " why ? " but when ! do you listen to the people that come here ? " " No , I 'm too busy ! do you listen to the thing ? " " Of course I do .
Response set ( low content diversity ) Suppose there 's an escape plan we have n't thought of yet . Suppose there 's an omelet that is the most amazing ever . Suppose there 's an airplane ticket that 's even cheaper . Suppose there 's an actual deadline for this paper . Suppose there 's an event that we can go to this weekend . Suppose there 's an airline that costs less . Suppose there 's an flight that is n't as expensive . Suppose there 's an air travel fare , but does n't cost as much . Suppose there 's an way to fly there that is low cost . Suppose there 's an flight going there and it 's not a lot of money Nothing remotely like eating a big breakfast . Nothing remotely like dancing with your wife at the wedding . Nothing remotely like singing Justin Bieber 's greatest hits Nothing remotely like falling down a hill Nothing remotely like getting yelled at Nothing remotely like being super full and satisfied . Nothing remotely like getting to taste many different foods . Nothing remotely like starting the day off right . Nothing remotely like doing exactly what I want to do . Nothing remotely like feeding myself with great food .
We thank Aya Meltzer - Asscher for linguistic advice , and Or Nachmias , Ben Bogin , Mor Geva , Omer Goldman and Ohad Rubin for their useful suggestions and references . This research was partially supported by The Israel Science Foundation grant 942/16 , The Yandex Initiative for Machine Learning and the European Research Council ( ERC ) under the European Union Horizons 2020 research and innovation programme ( grant ERC DELPHI 802800 ) .
Response set ( œÑ = 0.25 ) Response set ( œÑ = 0.8 ) Response set ( œÑ = 1.1 ) Fire next door . John woke up smelling like something was burning . He went outside . He saw the fire next door . He called the authorities . It was a minor fire and they put it out . It was a fire . It was a fire . It was a fire . It was a fire . It was a fire . It was a minor fire . It was a fire . It was a fire . It was a minor fire and they put it out . They arrived and put out the fire . It was a fire . It was a fire . It turned out to be a fire . It was a minor fire night . They arrived and put it out . It was a scary but beautiful fire next time he went in . It was a fire . It was a put out and John was able to put it out . It was a scary place to live . It turned out to be a mechanic . Before the fire was put out it was a fire . It was a fire . They co - worker matter how bad the fire was . Several shells , the fire department came just in time . They arrived and put out the fire . It turned out to be a clear , fact . It was a fire . It was a scary meal for wet clothes . It was a scary stealing from him . Charles Shaves His Chest . Charles decides he no longer wants chest hair . He shaves his chest hair with a razor . Although his skin is irritated , he hair is now gone . Charles is satisfied . He is glad that he finally shaved . He is glad that he finally shaved . He is very happy to have a chest hair . He is glad that he finally shaved . He is glad that he finally shaved . He is glad that he finally shaved . He is glad that he finally shaved . He is glad that he finally shaved . He is glad that he finally shaved . He is glad that he finally shaved . He is very happy to have a chest hair . He is glad that he finally shaved . He is very happy that he no longer has chest hair . He is glad that he finally shaved . He is glad that he finally shaved . He is glad that his chest hair is no longer shaved . He is glad that he finally shaved He is glad that he finally shaved . He is glad that he finally of shaving . He is glad that he finally shashock his chest hair . He is glad that he finally peaceful his voice again . He is glad that he finally shaavoided his chest hair . He is glad that he finally downcome . He is ready to start better cooperation his fireplace . He is glad that he finally shaved . He is glad that he no longer has chest hair . He is happy to finally be shaved . He is very happy to have ster good ride of his life . He is glad that he finally shaved . He is glad that he finally has chest hair .
Response set ( k = 3 ) Response set ( k = 32 ) Response set ( k = 318 ) Loud Noise . Jane was trying to take a nap . She heard a loud bang in the kitchen . It woke her up . A dish had fallen off the counter . Jane pulled over and started to clean herself . Jane was horrified and dropped her favorite food . Jane was able to finish her car and take a nap . Jane was able to finish her nap . Jane was able to finish her nap . Jane stopped at the store to buy a new one . Jane was able to grab a nap afterwards . Jane was unable to finish her nap since it was lost . Jane pulled over and started to clean up . Jane was able to finish her nap . Jane was able to catch a car using the seat . Jane stopped at the store to buy a new book . Jane was sad her cat dropped out of the kitchen . Jane screamed . Jane was horrified to find her car broken down on the floor . Jane was horrified and dropped her pay phone . Jane was easily able to grab a nap . Jane pulled over and started to cry . Jane pulled over and started to cry . Jane stopped at the store to buy a new dish from the store . Jane comes , noticed a lot of food left under it . Jane was horrified and dropped her book . Jane remembered to take a nap . Jane was since she took a nap while she waited for the refun Jane knew she had no time to finish her book . Jane was glad . Jane was annoyed and began to cry . Jane stopped at the store to buy a new one . Jane wanted to have her car back . Jane was monthed .
Kate was wearing big over the ear headphones . But they were tight and squeezing her head . She tried to adjust them to relieve the tension . But nothing really worked . Kate decided to go to the store and buy some ear phones . She decided to go to the store and buy some headphones instead . She decided to go to the store and buy some ear phones . She decided to go buy a pair of headphones instead . She decided to go to the store and buy some headphones instead . She decided to go to the store and buy some headphones instead . She decided to go to the doctor and have some rest . Kate decided to go to the store and buy some headphones instead . She decided to go to the store and buy some ear phones . She decided to go buy some ear plugs . She decided to go buy a hat so she could enjoy the the long lin Kate decided to go to the store to buy some candy since she was ti Kate decided to go outside to rest . Kate decided to go to the store and buy some ran phones . Kate decided to go to the store and buy some headphones instead . Kate decided to go back to her old dishes . She decided to go buy a big pair of headphones instead . Kate decided to go to the store and wearing some headphones . She was forced to go to the store to buy some cash . She decided to go to the store and buy some headphones instead . She decided to go to a ess instead . Kate decided to go to the store and buy some fake headphones . She decided to go to the store and buy some ear phones . She decided to go to the store and buy some headphones instead . She decided to go to the store and buy some headphones instead . She decided to go buy some ear phones . Kate decided to go to the gym and use some saw no more watching T Kate decided to go to the store and buy some cute phones . She decided to go buy a fake headphones instead . She decided to go to the store and buy some concert .
Response set ( k = 3 ) Response set ( k = 32 ) Response set ( k = 318 ) watching curry play in his prime is truly a privilege i know i just do nt want him to play for us he has to be a good center for that he is a great center of football in his prime he s been playing in his prime for a long time he was a great back in the day he s been playing for a while now i do nt know about that he was pretty damn good at that i do nt think he was ever in his prime i do nt think he is a prime minister i do nt know why but i think he is a very good player and and his career as well agreed the way he s playing is awesome it has to be this is just called a job and then being on the field for the first time i do nt see him doing that often enough he just likes to party in the kitchen at this point he s going to be a great star for the rest of the only if he pays well the only thing that can make that kind of difference is how much time you yeah my feeling i mean we do nt like it but it happens all the you are one for real they still have a rule saying they might not be injured yet it really is a necessary thing to do finally some reason to continue watching him at some point yet that would be epic not to mention eating curry dinner is a privilege i just do nt want to turn over for this goal like he does in gt playing in his prime is truly a privilege ftfy so is saying he is in high school i m going this evening when she usually works i think you accidentally a word you are a good man i hope she works i m going to the same time as you when she usually works i am so sorry to hear that i hope she works for you i am so jealous of your work i am so jealous i hope you have fun i hope you get a job at a local bar i hope she works for you Response set ( œÑ = 0.25 ) Response set ( œÑ = 0.8 ) Response set ( œÑ = 1.1 ) Not the hacking . The hacking is the fact that the DNC was hacked . ! Not the hacking . The hacking is the real problem . The hacking is the ! Not the hacking of the DNC , but the leaks of the emails of the Democratic National Committee . ! Not the hacking , but the way it was done . The FBI 's investigation into the ! Not the hacking of the DNC , but the hacking of the emails of the Democratic National Committee . ! Not the hacking of the DNC , but the leaking of the emails . The DNC 's ! Not the hacking of the DNC . The hacking of the DNC was a " false flag ! Not the hacking of the DNC . But the hacking of the RNC . The DNC hack ! Not the hacking . The hacking is the problem . The hacking is the problem ! Not the hacking of the DNC , but the leaking of the emails . The DNC was hacked , ! Not the hacking after all ? I 'm sure the nation - states that are involved in ! Not the hacking that happened on the internal networks of the Energy Department . In fact , according to ! Not the hacking of the American public but rather the fraudulent Heisenberg principle that seemed to be ! Not the hacking that took place in the DNC last year or the release of hacked emails during the ! Not the hacking futurists Cardboard inventor and self - described tinkerer Dennis ! Not the hacking alone . In the first half of the report , the hackers tried to create fake ! ( Top - k ) . Bold text is the 3 - words prompt context .
Response set ( high content diversity ) Response set ( low content diversity ) Sold Out Jane wanted to watch a big new action movie . She had been waiting a long time for it to come out . When tickets became available she was too busy . By the time she had a chance to buy some it was sold out . Jane cried over the fact that she could n't watch it and just gave up looking for a ticket . Jane decided to look for a scalper that would sell her the ticket for the movie that she really wanted to see . Jane thought it was okay since she can still have a chance to watch it once it gets uploaded in video and movie streaming applications . Jane posted a status on her social media accounts asking her friends for any spare ticket that she is willing to buy . Jane resorted to contacting her old friend who is working at a huge movie theater hoping she can help her get a ticket . Jane remembered that she has an old friend who is a manager at a big movie theater so she contacted that friend in the hopes that she can buy any spare ticket . Desperate to watch the movie , Jane called her friend , who works at a movie theater , asking for a ticket to that movie . Jane recalled that her friend works at a movie theater and hoped that she can help get a ticket for that movie . Jane decided to look for her friend who could possibly have access to tickets for that movie since that friend currently works at a movie theater . Jane realized that her friend might have spare tickets since she is a manager of a movie theater showing that film .
My friend has some beavers in his backyard . They come up from the creek by his house . He invites my over and we watch them . We take pictures of them and send them to our friends . They are fascinating animals . Our friends love getting the pictures . Sometimes his dogs chase them . They are building a dam on the creek . They wo n't let us get too close to them . They are busy gathering sticks to make a dam . The dam they are building is almost complete . It 's fascinating to see their workmanship building a dam . They are turning the creek into a pond by building a dam . They all work together with careful engineering to build a dam . I just got into this show and ca n't stop watching places apple slices in a bowl so they 'll stay fresh Oh boy , I love apples . I do n't need you telling me how to keep things fresh , take a hike . Girl , you 're the fresh one around here . This post might be better in the life hacks section . This is actually a useful bit of advice . I find merit in this input . That information will serve me well . Thanks , that 's really good to know ! Such knowledge is certainly beneficial . Wise words , I will heed them .
