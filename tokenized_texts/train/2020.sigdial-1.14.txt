Learning and Reasoning for Robot Dialog and Navigation Tasks Keting Lu1Shiqi Zhang2Peter Stone3Xiaoping Chen1 1USTC2SUNY Binghamton3UT Austin ktlu@mail.ustc.edu.cn ; zhangs@binghamton.edu ; pstone@cs.utexas.edu ; xpchen@ustc.edu.cn Abstract Reinforcement learning and probabilistic reasoning algorithms aim at learning from interaction experiences and reasoning with probabilistic contextual knowledge respectively .
In this research , we develop algorithms for robot task completions , while looking into the complementary strengths of reinforcement learning and probabilistic reasoning techniques .
The robots learn from trial - and - error experiences to augment their declarative knowledge base , and the augmented knowledge can be used for speeding up the learning process in potentially different tasks .
We have implemented and evaluated the developed algorithms using mobile robots conducting dialog and navigation tasks .
From the results , we see that our robot ’s performance can be improved by both reasoning with human knowledge and learning from task - completion experience .
More interestingly , the robot was able to learn from navigation tasks to improve its dialog strategies .
1 Introduction Knowledge representation and reasoning ( KRR ) and reinforcement learning ( RL ) are two important research areas in artiﬁcial intelligence ( AI ) and have been applied to a variety of problems in robotics .
On the one hand , KRR research aims to concisely represent knowledge , and robustly draw conclusions with the knowledge ( or generate new knowledge ) .
Knowledge in KRR is typically provided by human experts in the form of declarative rules .
Although KRR paradigms are strong in representing and reasoning with knowledge in a variety of forms , they are not designed for ( and hence not good at ) learning from experiences of accomplishing the tasks .
On the other hand , RL algorithms enable agents to learn by interacting with an environment , and RL agents are good at learning action policies from trial - and - error experiences toward maximizing long - term rewards un - der uncertainty , but they are ill - equipped to utilize declarative knowledge from human experts .
Motivated by the complementary features of KRR and RL , we aim at a framework that integrates both paradigms to enable agents ( robots in our case ) to simultaneously reason with declarative knowledge and learn by interacting with an environment .
Most KRR paradigms support the representation and reasoning of knowledge in logical form , e.g. , Prolog - style .
More recently , researchers have developed hybrid KRR paradigms that support both logical and probabilistic knowledge ( Richardson and Domingos , 2006 ; Bach et al . , 2017 ; Wang et al . , 2019 ) .
Such logical - probabilistic KRR paradigms can be used for a variety of reasoning tasks .
We use P - log ( Baral et al . , 2009 ) in this work to represent and reason with both human knowledge and the knowledge from RL .
The reasoning results are then used by our robot to compute action policies at runtime .
Reinforcement learning ( RL ) algorithms can be used to help robots learn action policies from the experience of interacting with the real world ( Sutton and Barto , 2018 ) .
We use model - based RL in this work , because the learned world model can be used to update the robot ’s declarative knowledge base and combined with human knowledge .
Theoretical Contribution :
In this paper , we develop a learning and reasoning framework ( called KRR - RL ) that integrates logical - probabilistic KRR and model - based RL .
The KRR component reasons with the qualitative knowledge from humans ( e.g. , it is difﬁcult for a robot to navigate through a busy area ) and the quantitative knowledge from modelbased RL ( e.g. , a navigation action ’s success rate in the form of a probability ) .
The hybrid knowledge is then used for computing action policies at runtime by planning with task - oriented partial world models .
KRR - RL enables a robot to : i ) represent
the probabilistic knowledge ( i.e. , world dynamics ) learned from RL in declarative form ; ii ) unify and reason with both human knowledge and the knowledge from RL ; and iii ) compute policies at runtime by dynamically constructing task - oriented partial world models .
Application Domain : We use a robot delivery domain for demonstration and evaluation purposes , where the robot needs to dialog with people to ﬁgure out the delivery task ’s goal location , and then physically take navigation actions to complete the delivery task ( Thomason et al . , 2020 ; Veloso , 2018 ) .
A delivery is deemed successful only if both the dialog and navigation subtasks are successfully conducted .
We have conducted experiments using a simulated mobile robot , as well as demonstrated the system using a real mobile robot .
Results show that the robot is able to learn world dynamics from navigation tasks through model - based RL , and apply the learned knowledge to both navigation tasks ( with different goals ) and delivery tasks ( that require subtasks of navigation and dialog ) through logical - probabilistic reasoning .
In particular , we observed that the robot is able to adjust its dialog strategy through learning from navigation behaviors .
2 Related Work Research areas related to this work include integrated logical KRR and RL , relational RL , and integrated KRR and probabilistic planning .
Logical KRR has previously been integrated with RL .
Action knowledge ( McDermott et al . , 1998 ; Jiang et al . , 2019 ) has been used to reason about action sequences and help an RL agent explore only the states that can potentially contribute to achieving the ultimate goal ( Leonetti et al . , 2016 ) .
As a result , their agents learn faster by avoiding choosing “ unreasonable ” actions .
A similar idea has been applied to domains with nonstationary dynamics ( Ferreira et al . , 2017 ) .
More recently , task planning was used to interact with the high level of a hierarchical RL framework ( Yang et al . , 2018 ) .
The goal shared by these works is to enable RL agents to use knowledge to improve the performance in learning ( e.g. , to learn faster and/or avoid risky exploration ) .
However , the KRR capabilities of these methods are limited to logical action knowledge .
By contrast , we use a logicalprobabilistic KRR paradigm that can directly reason with probabilities learned from RL.Relational RL ( RRL ) combines RL with relational reasoning ( D ˇzeroski et
al . , 2001 ) .
Action models have been incorporated into RRL , resulting in a relational temporal difference learning method ( Asgharbeygi et al . , 2006 ) .
Recently , RRL has been deployed for learning affordance relations that forbid the execution of speciﬁc actions ( Sridharan et al . , 2017 ) .
These RRL methods , including deep RRL ( Zambaldi et al . , 2018 ) , exploit structural representations over states and actions in ( only ) current tasks .
In this research , KRR - RL supports the KRR of world factors beyond those in state and action representations , e.g. , time in navigation tasks , as detailed in Section 4.2 .
The research area of integrated KRR and probabilistic planning is related to this research .
Logicalprobabilistic reasoning has been used to compute informative priors and world dynamics ( Zhang et al . , 2017 ; Amiri et al . , 2020 ) for probabilistic planning .
An action language was used to compute a deterministic sequence of actions for robots , where individual actions are then implemented using probabilistic controllers ( Sridharan et al . , 2019 ) .
Recently , human - provided information has been incorporated into belief state representations to guide robot action selection ( Chitnis et al . , 2018 ) .
In comparison to our approach , learning ( from reinforcement or not ) was not discussed in the abovementioned algorithms .
Finally , there are a number of robot reasoning and learning architectures ( Tenorth and Beetz , 2013 ; Oh et al . , 2015 ; Hanheide et
al . , 2017 ; Khandelwal et al . , 2017 ) , which are relatively complex , and support a variety of functionalities .
In comparison , we aim at a concise representation for robot KRR and RL capabilities .
To the best of our knowledge , this is the ﬁrst work on a tightly coupled integration of logical - probabilistic KRR with model - based RL .
3 Background We brieﬂy describe the two most important building blocks of this research , namely model - based RL and hybrid KRR .
3.1 Model - based Reinforcement Learning Following the Markov assumption , a Markov decision process ( MDP ) can be described as a fourtuplehS ; A;T;Ri(Puterman , 1994 ) .
Sdeﬁnes the state set , where we assume a factored space in this work .
Ais the action set .
T : SAS !
[ 0;1]speciﬁes the state transition probabilities .
R : SA !
Rspeciﬁes the rewards .
Solving an MDP produces an action policy p : s7!athat maps a state to an action to maximize long - term rewards .
RL methods fall into classes including modelbased and model - free .
Model - based RL methods learn a model of the domain by approximating R(s;a)andP(s0js;a)for state - action pairs , where Prepresents the probabilistic transition system .
An agent can then use planning methods to calculate an action policy ( Sutton , 1990 ; Kocsis and Szepesv ´ ari , 2006 ) .
Model - based methods are particularly attractive in this work , because they output partial world models that can better accommodate the diversity of tasks we are concerned with , c.f . , modelfree RL that is typically goal - directed .
One of the best known examples of model - based RL is R - Max ( Brafman and Tennenholtz , 2002 ) , which is guaranteed to learn a near - optimal policy with a polynomial number of suboptimal ( exploratory ) actions .
The algorithm classiﬁes each state - action pair as known or unknown , according to the number of times it was visited .
When planning on the model , known state - actions are modeled with the learned reward , while unknown stateactions are given the maximum one - step reward , Rmax .
This “ maximum - reward ” strategy automatically enables the agent to balance the exploration of unknown states and exploitation .
We use R - Max in this work , though KRR - RL practitioners can use supervised machine learning methods , e.g. , imitation learning ( Osa et al . , 2018 ) , to build the model learning component .
3.2 Logical Probabilistic KRR KRR paradigms are concerned with concisely representing and robustly reasoning with declarative knowledge .
Answer set programming ( ASP ) is a non - monotonic logical KRR paradigm ( Baral , 2010 ; Gelfond and Kahl , 2014 ) building on the stable model semantics ( Gelfond and Lifschitz , 1988 ) .
An ASP program consists of a set of logical rules , in the form of “ head : - body ” , that read “ head is true if body is true ” .
Each ASP rule is of the form : a or ... or b : - c , ... , d , not e , ... , not f. where a ... f are literals that correspond to true or false statements .
Symbol notis a logical connective called default negation ; not l is read as “ it is not believed that lis true ” , which does not imply thatlis false .
ASP has a variety of applications ( Erdem et al . , 2016 ) .
Model - based RL Human   KRR Declarative   knowledge World   dynamics World   Controller   New task Learning   Task   completions Figure 1 : An overview of KRR - RL for robot learning and reasoning to complete complex tasks .
Traditionally , ASP does not explicitly quantify degrees of uncertainty : a literal is either true , false or unknown .
P - log extends ASP to allow probability atoms ( orpr - atoms ) ( Baral et al . , 2009 ; Balai and Gelfond , 2017 ) .
The following pr - atom states that , if Bholds , the probability of a(t)=y isv : pr(a(t)=y|B)=v .
where Bis a collection of literals or their default negations ; ais a random variable ; tis a vector of terms ( a term is a constant or a variable ) ; yis a term ; andv2[0;1 ] .
Reasoning with an ASP program generates a set of possible worlds : fW0;W1;g .
The pr - atoms in P - log enable calculating a probability for each possible world .
Therefore , P - log is a KRR paradigm that supports both logical and probabilistic inferences .
We use P - log in this work for KRR purposes .
4 KRR - RL Framework KRR - RL integrates logical - probabilistic KRR and model - based RL , and is illustrated in Figure 1 .
The KRR component includes both declarative qualitative knowledge from humans and the probabilistic knowledge from model - based RL .
When the robot is free , the robot arbitrarily selects goals ( different navigation goals in our case ) to work on , and learns the world dynamics , e.g. , success rates and costs of navigation actions .
When a task becomes available , the KRR component dynamically constructs a partial world model ( excluding unrelated factors ) , on which a task - oriented controller is computed using planning algorithms .
Human knowledge concerns environment variables and their dependencies , i.e. , what variables are related to each action .
For instance , the human provides knowledge that navigation actions ’ success rates depend on current time and area ( say elevator areas are busy in the mornings ) , while the robot must learn speciﬁc probabilities by interacting with the environment .
Why is KRR - RL needed ?
Consider an indoor robot navigation domain , where a robot wants to
maximize the success rate of moving to goal positions through navigation actions .
Shall we include factors , such as time , weather , positions of human walkers , etc , into the state space ?
On the one hand , to ensure model completeness , the answer should be “ yes ” .
Human walkers and sunlight ( that blinds robot ’s LiDAR sensors ) reduce the success rates of the robot ’s navigation actions , and both can cause the robot irrecoverably lost .
On the other hand , to ensure computational feasibility , the answer is “ no ” .
Modeling whether one speciﬁc grid cell being occupied by humans or not introduces one extra dimension in the state space , and doubles the state space size .
If we consider ( only ) ten such grid cells , the state space becomes 2101000 times bigger .
As a result , RL practitioners frequently have to make a trade - off between model completeness and computational feasibility .
In this work , we aim at a framework that retains both model scalability and computational feasibility , i.e. , the agent is able to learn within relatively little memory while computing action policies accounting for a large number of domain variables .
4.1 A General Procedure In factored spaces , state variables V= fV0;V1 ; : : : ; Vn 1gcan be split into two categories , namely endogenous variables Ven and exogenous variables Vex(Chermack , 2004 ) , whereVen = fVen 0;Ven 1 ; : : : ; Ven p 1gand Vex = fVex 0;Vex 1 ; : : : ; Vex q 1 g.
In our integrated KRRRL context , Venis goal - oriented and includes the variables whose values the robot wants to actively change so as to achieve the goal ; and Vexcorresponds to the variables whose values affect the robot ’s action outcomes , but the robot can not ( or does not want to ) change their values .
Therefore , VenandVexboth depend on task t.
Continuing the navigation example , robot position is an endogenous variable , and current time is an exogenous variable .
For each task , V = Ven[Vex and n = p+q , and RL agents learn in spaces speciﬁed byVen .
The KRR component models V , their dependencies from human knowledge , and conditional probabilities on how actions change their values , as learned through model - based RL .
When a task arrives , the KRR component uses probabilistic rules to generate a task - oriented Markov decision process ( MDP ) ( Puterman , 1994 ) , which only contains a subset ofVthat are relevant to the current task , Procedure 1 Learning in KRR - RL Framework Require : Logical rules PL ; probabilistic rules PP ; random variables V = fV0;V1 ; : : : ; Vn 1 g ; task selector D ; and guidance functions ( from human knowledge ) of fV(V;t)and fA(t ) 1 : while Robot has no task do 2 : t D ( ): a task is heuristically selected 3 : Ven fV(V;t ) , andVex VnVen 4 : A fA(t ) 5 : M Procedure- 2(PL;PP;Ven;Vex;A ) 6 : Initialize agent : agent R - Max ( M ) 7 : RLagent repeatedly works on task t , and keeps maintaining task model M0 , until policy convergence 8 : end while 9 : Use M0to update PP i.e. ,Ven , and their transition probabilities .
Given this task - oriented MDP , a corresponding action policy is computed using value iteration or policy iteration .
Procedures 1 and 2 focus on how our KRR - RL agent learns by interacting with an environment when there is no task assigned.1Next , we present the details of these two interleaved processes .
Procedure 1 includes the steps of the learning process .
When the robot is free , it interacts with the environment by heuristically selecting a task2 , and repeatedly using a model - based RL approach , RMax ( Brafman and Tennenholtz , 2002 ) in our case , to complete the task .
The two guidance functions come from human knowledge .
For instance , given a navigation task , it comes from human knowledge that the robot should model its own position ( speciﬁed by fV ) and actions that help the robot move between positions ( speciﬁed by fA ) .
After the policy converges or this learning process is interrupted ( e.g. , by task arrivals ) , the robot uses the learned probabilities to update the corresponding world dynamics in KRR .
For instance , the robot may have learned the probability and cost of navigating through a particular area in early morning .
In case this learning process is interrupted , the sofar-“known ” probabilities are used for knowledge base update .
Procedure 2 includes the steps for building the probabilistic transition system of MDPs .
The key point is that we consider only endogenous variables in the task - speciﬁc state space .
However , when 1As soon as the robot ’s learning process is interrupted by the arrival of a real service task ( identiﬁed via dialog ) , it will call Procedure 2 to generate a controller to complete the task .
This process is not included in the procedures .
2Here curriculum learning in RL ( Narvekar et al . , 2017 ) can play a role to task selection and we leave this aspect of the problem for future work .
Dialog manager Navigation   “ What item ? ”
“ Apple , please ” Once become confident about the request   Human Action : Move to X Current state   Environment Restart if wrong delivery If successful ,   return Figure 2 : Transition system speciﬁed for delivery tasks , where question - asking actions are used for estimating the service request in dialog .
Once the robot becomes conﬁdent about the service request , it starts to work on the navigation subtask .
After the robot arrives , the robot might have to come back to the dialog subtask and redeliver , depending on whether the service request was correctly identiﬁed .
reasoning to compute the transition probabilities ( Line 5 ) , the KRR component uses both PPand Vex .
The computed probabilistic transition systems are used for building task - oriented controllers , i.e. , p , for task completions .
In this way , the dynamically constructed controllers do not directly include exogenous variables , but their parameters already account for the values of all variables .
Next , we demonstrate how our KRR - RL framework is instantiated on a real robot .
4.2 An Instantiation on a Mobile Robot
We consider a mobile service robot domain where a robot can do navigation , dialog , and delivery tasks .
Anavigation task requires the robot to use a sequence of ( unreliable ) navigation actions to move from one point to another .
In a dialog task , the robot uses spoken dialog actions to specify service requests from people under imperfect language understanding .
There is the trend of integrating language and navigation in the NLP and CV communities ( Chen et al . , 2019 ; Shridhar et al . , 2020 ) .
In this paper , they are integrated into delivery tasks that require the robot to use dialog to ﬁgure out the delivery request and conduct navigation tasks to physically fulﬁll the request .
Speciﬁcally , a delivery task requires the robot to deliver item Ito room Rfor person P , resulting in services in the form of < I , R , P > .
The challenges come from unreliable human language understanding ( e.g. , speech recognition ) and unforeseen obstacles that probabilistically block the robot in navigation .
Human - Robot Dialog The robot needs spoken dialog to identify the request under unreliable language understanding , and navigation controllers for physically making the delivery .
The service request is not directly observable to the robot , and has to be estimated by asking questions , such as “ What item do you want ? ”
and “ IsProcedure 2 Model Construction for Task Completion Require : PL;PP;Ven;Vex ; Action set A 1 : forVi2Ven , iin[0; ; jVenj 1]do 2 : foreach possible value vinrange ( Vi)do 3 : foreach a2Ado 4 : foreach possible value v0inrange ( Vi)do 5 : M(v0ja;v ) Reason with PLandPPw.r.t Vex 6 : end for 7 : end for 8 : end for 9 : end for 10 : return M this delivery for Alice ? ”
Once the robot is conﬁdent about the request , it takes a delivery action ( i.e. , serve(I , R , P ) ) .
We follow a standard way to use partially observable MDPs ( POMDPs ) ( Kaelbling et al . , 1998 ) to build our dialog manager , as reviewed in ( Young et al . , 2013 ) .
The state set Sis speciﬁed using curr s.
The action setAis speciﬁed using serve and question - asking actions .
Question - asking actions do not change the current state , and delivery actions lead to one of the terminal states ( success or failure).3 After the robot becomes conﬁdent about the request via dialog , it will take a delivery action serve fI , R , P g.
This delivery action is then implemented with a sequence of actmove actions .
When the request identiﬁcation is incorrect , the robot needs to come back to the shop , ﬁgure out the correct request , and redeliver , where we assume the robot will correctly identify the request in the second dialog .
We use an MDP to model this robot navigation task , where the states and actions are speciﬁed using sorts cell andmove .
We use pr - atoms to represent the success rates of the unreliable movements , which are learned through model - based RL .
The dialog system builds on our 3More details in the supplementary document .
previous work ( Lu et al . , 2017 ) .
Figure 2 shows the probabilistic transitions in delivery tasks .
Learning from Navigation We use RMax ( Brafman and Tennenholtz , 2002 ) , a model - based RL algorithm , to help our robot learn the success rate of navigation actions in different positions .
The agent ﬁrst initializes an MDP , from which it uses R - Max to learn the partial world model ( of navigation tasks ) .
Speciﬁcally , it initializes the transition function with TN(s;a;sv ) = 1:0 , where s2S and a2A , meaning that starting from any state , after any action , the next state is always sv .
The reward function is initialized with R(s;a )
= Rmax , where Rmaxis an upper bound of reward .
The initialization of TNandRenables the learner to automatically balance exploration and exploitation .
There is a ﬁxed small cost for each navigation action .
The robot receives a big bonus if it successfully achieves the goal ( Rmax ) , whereas it receives a big penalty otherwise (  Rmax ) .
A transition probability in navigation , TN(s;a;s0 ) , is not computed until there are a minimum number ( M ) of transition samples visiting s0 .
We recompute the action policy after Eaction steps .
Dialog - Navigation Connection The update of knowledge base is achieved through updating the success rate of delivery actions serve(I , R , P ) ( in dialog task ) using the success rate of navigation actions actmove = M in different positions .
TD(sr;ad;st )
=(
PN(ssp;sgl);ifsr  ad PN(ssp;smi)PN(smi;ssp)PN(ssp;sgl);ifsr ad where TD(sr;ad;st)is the probability of fulﬁlling request srusing delivery action ad;stis the “ success ” terminal state ; ssp , smiandsglare states of the robot being in the shop , a misidentiﬁed goal position , and real goal position respectively ; and PN(s;s0)is the probability of the robot successfully navigating from stos0positions .
When srandad are aligned in all three dimensions ( i.e. , sr  ad ) , the robot needs to navigate once from the shop ( ssp ) to the requested navigation goal ( sgl).PN(ssp;sgl ) is the probability of the corresponding navigation task .
When the request and delivery action are not aligned in at least one dimension ( i.e. , sr ad ) , the robot has to navigate back to the shop to ﬁgure out the correct request , and then redeliver , resulting in three navigation tasks .
Figure 3 : Occupancy - grid map used in our experiments ( Left ) , including ﬁve rooms , one shop , and four blocking areas ( indicated by ‘ BA ’ ) , where all deliveries are from the shop and to one of the rooms ; and ( Right ) mobile robot platform used in this research .
Intuitively , the penalty of failures in a dialog subtask depends on the difﬁculty of the wrongly identiﬁed navigation subtask .
For instance , a robot supposed to deliver to a near ( distant ) location being wrongly directed to a distant ( near ) location , due to a failure in the dialog subtask , will produce a higher ( lower ) penalty to the dialog agent .
5 Experiments In this section , the goal is to evaluate our hypothesis that our KRR - RL framework enables a robot to learn from model - based RL , reason with both the learned knowledge and human knowledge , and dynamically construct task - oriented controllers .
Speciﬁcally , our robot learns from navigation tasks , and applied the learned knowledge ( through KRR ) to navigation , dialog , and delivery tasks .
We also evaluated whether the learned knowledge can be represented and applied to tasks under different world settings .
In addition to simulation experiments , we have used a real robot to demonstrate how our robot learns from navigation to perform better in dialog .
Figure 3 shows the map of the working environment ( generated using a real robot ) used in both simulation and real - robot experiments .
Human walkers in the blocking areas ( “ BA ” ) can probabilistically impede the robot , resulting in different success rates in navigation tasks .
We have implemented our KRR - RL framework on a mobile robot in an ofﬁce environment .
As shown in Figure 3 , the robot is equipped with two Lidar sensors for localization and obstacle avoidance in navigation , and a Kinect RGB - D camera for human - robot interaction .
We use the Speech Application Programming Interface ( SAPI ) package ( http://www.iflytek.com/en ) for speech recognition .
The robot software runs in the Robot Operating System ( ROS ) ( Quigley et al . , 2009 ) .
( a ) ( b ) ( c ) ( d ) ( e ) ( f ) Figure 4 :
Screenshots of a demonstration trial on a real robot .
( a ) User gives the service request ; ( b ) The robot decided to conﬁrm about the item , considering its unreliable language understanding capability ; ( c ) After hearing “ coke ” , the robot became more conﬁdent about the item , and decided to ask again about the goal room ’ ; ( d ) After hearing “ ofﬁce2 ” , the robot became conﬁdent about the whole request , and started to work on the task ; ( e ) Robot was on the way to the kitchen to pick up the object ; and ( f ) Robot arrived at the kitchen , and was going to pick up the object for delivery .
An Illustrative Trial on a Robot : Figure 4 shows the screenshots of milestones of a demo video , which will be made available given its acceptance .
After hearing “ a coke for Bob to ofﬁce2 ” , the three sub - beliefs are updated ( turn1 ) .
Since the robot is aware of its unreliable speech recognition , it asked about the item , “ Which item is it ? ”
After hearing “ a coke ” , the belief is updated ( turn2 ) , and the robot further conﬁrmed on the item by asking “ Should I deliver a coke ? ”
It received a positive response ( turn3 ) , and decided to move on to ask about the delivery room : “ Should I deliver to ofﬁce 2 ? ”
After this question , the robot did not further conﬁrm the delivery room , because it learned through model - based RL that navigating tooffice2 is relatively easy and it decided that it is more worth risking an error and having to replan than it is to ask the person another question .
The robot became conﬁdent in three dimensions of the service request ( < coke , Bob , office2 > inturn4 ) without asking about person , because of the prior knowledge ( encoded in P - log ) about Bob ’s ofﬁce .
Figure 5 shows the belief changes ( in the di - mensions of item , person , and room ) as the robot interacts with a human user .
The robot started with a uniform distribution in all three categories .
It should be noted that , although the marginal distributions are uniform , the joint belief distribution is not , as the robot has prior knowledge such as Bob ’s ofﬁce is office2 and people prefer deliveries to their own ofﬁces .
Demo video is not included to respect the anonymous review process .
Learning to Navigate from Navigation Tasks In this experiment , the robot learns in the shop - room1 navigation task , and extracts the learned partial world model to the shop - room2 task .
It should be noted that navigation from shop to room2 requires traveling in areas that are unnecessary in the shop - room1 task .
Figure 6 presents the results , where each data points corresponds to an average of 1000 trials .
Each episode allows at most 200 ( 300 ) steps in small ( large ) domain .
The curves are smoothed using a window of 10 episodes .
The results suggest that with knowledge extraction ( the dashed line ) the robot learns faster than without extraction , and this performance improvement is more signiﬁcant in a larger domain ( the Right subﬁgure ) .
Learning to Dialog and Navigate from Navigation Tasks Robot delivering objects requires both tasks : dialog management for specifying service request ( under unreliable speech recognition ) and navigation for physically delivering objects ( under unforeseen obstacles ) .
Our ofﬁce domain includes ﬁve rooms , two persons , and three items , resulting in 30 possible service requests .
In the dialog manager , the reward function gives delivery actions a big bonus ( 80 ) if a request is fulﬁlled , and a big penalty ( -80 ) otherwise .
General questions and conﬁrming questions cost 2.0 and 1.5 respectively .
In case a dialog does not end after 20 turns , the robot is forced to work on the most likely delivery .
The cost / bonus / penalty values are heuristically set in this work , following guidelines based on studies from the literature on dialog agent behaviors ( Zhang and Stone , 2015 ) .
Table 1 : Overall performance in delivery tasks ( requiring both dialog and navigation ) .
Static policy KRR - RL Reward Fulﬁlled QA Cost Reward Fulﬁlled QA Cost br=0:1 182.07 0.851 20.86 206.21 0.932 18.73 br=0:5 30.54 0.853 20.84 58.44 0.927 18.98 br=0:7 -40.33 0.847 20.94 -14.50 0.905 20.56
Figure 5 : Belief change in three dimensions ( In order from the left : Items , Persons and Ofﬁces ) over ﬁve turns in a human - robot dialog .
The distributions are grouped by turns ( Including the initial distribution ) .
In each turn , there are three distribution bars which means three different dimensions ( In order from the left : Item , Person and Ofﬁce ) .
In order from the bottom , the values in each dimension are 1 ) coke , coffee and soda in Item ; 2 ) John and Bob in Person ; and 3 ) ofﬁce1 , ofﬁce2 , ofﬁce3 , ofﬁce4 and ofﬁce5 in Ofﬁce .
01234567
Episodes ( x10)-200 - 150 - 100 - 500Reward 30x30 grid w/o extraction w/ extraction 0123456789101112 Episodes ( x10)-350 - 300 - 250 - 200 - 150 - 100 - 50050Reward 50x50 grid w/o extraction w/ extraction Figure 6 : Navigation tasks in small ( Left : 30 30 grid ) and large ( Right : 50 50 grid ) domains .
With extraction ( KRR - RL in dashed line ) , the robot learns faster in the target navigation task .
Table 1 reports the robot ’s overall performance in delivery tasks , which requires accurate dialog for identifying delivery tasks and safe navigation for object delivery .
We conduct 10,000 simulation trials under each blocking rate .
Without learning from RL , the robot uses a world model ( outdated ) that was learned under br=0:3 .
With learning , the robot updates its world model in domains with different blocking rates .
We can see , when learning is enabled , our KRR - RL framework produces higher overall reward , higher request fulﬁllment rate , and lower question - asking cost .
The improvement is statistically signiﬁcant , i.e. , the p values are 0.028 , 0.035 , and 0.049 for overall reward , when bris 0.1 , 0.5 , and 0.7 respectively ( 100 randomly selected trials with / without extraction ) .
Learning to Adjust Dialog Strategies from Navigation In the last experiment , we quantify the information collected in dialog in terms of entropy reduction .
The hypothesis is that , using our KRRRL framework , the dialog manager wants to collect more information before physically working on more challenging tasks .
In each trial , we randomly generate a belief distribution over all possible service requests , evaluate the entropy of this belief , and record the suggested action given this belief .
We then statistically analyze the entropy values of beliefs , under which delivery actions are suggested .
Table 2 : The amount of information ( in terms of entropy ) needed by a robot before taking delivery actions .
Entropy ( room1 ) Entropy ( room2 ) Entropy ( room5 ) Mean ( std ) Max Mean ( std ) Max Mean ( std ) Max br=0:1 .274 ( .090 ) .419 .221 ( .075 ) .334 .177
( .063 ) .269 br=0:5 .154 ( .056 ) .233 .111 ( .044 ) .176 .100 ( .041 ) .156 br=0:7 .132 ( .050 ) .207 .104
( .042 ) .166 .100 ( .041 ) .156 Table 2 shows that , when brgrows from 0.1 to 0.7 , the means of belief entropy decreases ( i.e. , belief is more converged ) .
This suggests that the robot collected more information in dialog in environments that are more challenging for navigation , which is consistent with Table 1 in the main paper .
Comparing the three columns of results , we ﬁnd the robot collects the most information before it delivers to room5 .
This is because such delivery tasks are the most difﬁcult due to the location of room5 .
The results support our hypothesis that learning from navigation tasks enables the robot to adjust its information gathering strategy in dialog given tasks of different difﬁculties .
Adaptive Control in New Circumstances The knowledge learned through model - based RL is contributed to a knowledge base that can be used for many tasks .
So our KRR - RL framework enables a robot to dynamically generate partial world models for tasks under settings that were never experienced .
For example , an agent does not know the current time is morning or noon , there are two possible values for variable “ time ” .
Consider that our agent has learned world dynamics under the times of morning and noon .
Our KRR - RL framework enables the robot to reason about the two transition systems under the two settings and generate a new transition system for this “ morning - or - noon ” setting .
baseline KRR - RL204060CostFigure 7 : Adaptive behaviors under new circumstances .
Without our framework , an agent would have to randomly select one between the “ morning ” and “ noon ” policies .
To evaluate our policies dynamically constructed via KRR , we let an agent learn three controllers under three different environment settings – the navigation actions have decreasing success rates under the settings .
In this experiment , the robot does not know which setting it is in ( out of two that are randomly selected ) .
The baseline does not have the KRR capability of merging knowledge learned from different settings , and can only randomly select a policy from the two ( each corresponding to a setting ) .
Experimental results show that the baseline agent achieved an average of 26:8%success rate in navigation tasks , whereas our KRRRL agent achieved 83:8%success rate on average .
Figure 7 shows the costs in a box plot ( including min - max , 25 % , and 75 % values ) .
Thus , KRR - RL enables a robot to effectively apply the learned knowledge to tasks under new settings .
Let us take a closer look at the “ time ” variable T. IfTis the domain of T , the RL - only baseline has to compute a total of 2jTjworld models to account for all possible information about the value of T , where 2jTjis the number of subsets of T. If there areNsuch variables , the number of world models grows exponentially to 2jTjN.
In comparison , the KRR - RL agent needs to compute only jTjNworld models , which dramatically reduces the number of parameters that must be learned through RL while retaining policy quality .
6 Conclusions and Future Work We develop a KRR - RL framework that integrates computational paradigms of logical - probabilistic knowledge representation and reasoning ( KRR ) , and model - based reinforcement learning ( RL ) .
Our KRR - RL agent learns world dynamics via modelbased RL , and then incorporates the learned dynamics into the logical - probabilistic reasoning module , which is used for dynamic construction of efﬁcientrun - time task - speciﬁc planning models .
Experiments were conducted using a mobile robot ( simulated and physical ) working on delivery tasks that involve both navigation and dialog .
Results suggested that the learned knowledge from RL can be represented and used for reasoning by the KRR component , enabling the robot to dynamically generate task - oriented action policies .
The integration of a KRR paradigm and modelbased RL paves the way for at least the following research directions .
We plan to study how to sequence source tasks to help the robot perform the best in the target task ( i.e. , a curriculum learning problem within the RL context ( Narvekar et al . , 2017 ) ) .
Balancing the efﬁciencies between service task completion and RL is another topic for further study – currently the robot optimizes for task completions ( without considering the potential knowledge learned in this process ) once a task becomes available .
Fundamentally , all domain variables are endogenous , because one can hardly ﬁnd variables whose values are completely independent from robot actions .
However , for practical reasons ( such as limited computational resources ) , people have to limit the number of endogenous .
It remains an open question of how to decide what variables should be considered as being endogenous .
Acknowledgments This work is supported in part by the National Natural Science Foundation of China under grant number U1613216 .
This work has taken place partly in the Autonomous Intelligent Robotics ( AIR ) Group at SUNY Binghamton .
AIR research is supported in part by grants from the National Science Foundation ( IIS-1925044 ) , Ford Motor Company ( URP Award ) , OPPO ( Faculty Research Award ) , and SUNY Research Foundation .
This work has taken place partly in the Learning Agents Research Group ( LARG ) at the Artiﬁcial Intelligence Laboratory , The University of Texas at Austin .
LARG research is supported in part by grants from the National Science Foundation ( CPS-1739964 , IIS-1724157 , NRI-1925082 ) , the Ofﬁce of Naval Research ( N00014 - 18 - 2243 ) , Future of Life Institute ( RFP2 - 000 ) , DARPA , Lockheed Martin , General Motors , and Bosch .
The views and conclusions contained in this document are those of the authors alone .
Peter Stone serves as the Executive Director of Sony AI America and receives ﬁnancial compensation for this work .
The terms of this arrangement have been reviewed and approved by the University of Texas at Austin in accordance with its policy on objectivity in research .
References Saeid Amiri , Mohammad Shokrolah Shirazi , and Shiqi Zhang .
2020 .
Learning and reasoning for robot sequential decision making under uncertainty .
In AAAI .
Nima Asgharbeygi , David Stracuzzi , and Pat Langley .
2006 .
Relational temporal difference learning .
In Proceedings of the 23rd international Conference on Machine learning .
Stephen H. Bach , Matthias Broecheler , Bert Huang , and Lise Getoor .
2017 .
Hinge - loss markov random ﬁelds and probabilistic soft logic .
JMLR , 18(1):3846–3912 .
Evgenii Balai and Michael Gelfond . 2017 .
Reﬁning and generalizing p - log : Preliminary report .
In Proceedings of the 10th Workshop on ASPOCP .
Chitta Baral .
2010 .
Knowledge Representation , Reasoning and Declarative Problem Solving , 1st edition .
Cambridge University Press , New York , NY , USA .
Chitta Baral , Michael Gelfond , and Nelson Rushton . 2009 .
Probabilistic reasoning with answer sets .
Theory and Practice of Logic Programming , 9(1):57 – 144 .
Ronen I Brafman and Moshe Tennenholtz .
2002 .
Rmax - a general polynomial time algorithm for nearoptimal reinforcement learning .
JMLR .
Howard Chen , Alane Suhr , Dipendra Misra , Noah Snavely , and Yoav Artzi .
2019 .
Touchdown : Natural language navigation and spatial reasoning in visual street environments .
In Proceedings of the IEEE Conference on Computer Vision and Pattern Recognition , pages 12538–12547 .
Thomas J Chermack .
2004 .
Improving decisionmaking with scenario planning .
Futures , 36(3):295 – 309 .
Rohan Chitnis , Leslie Pack Kaelbling , and Tom ´ as Lozano - P ´ erez .
2018 .
Integrating human - provided information into belief state representation using dynamic factorization .
In IEEE / RSJ International Conference on Intelligent Robots and Systems .
Saˇso D ˇzeroski , Luc De Raedt , and Kurt Driessens .
2001 .
Relational reinforcement learning .
Machine learning .
Esra Erdem , Michael Gelfond , and Nicola Leone .
2016 .
Applications of answer set programming .
AI Magazine , 37(3):53–68 .
Leonardo A Ferreira , Reinaldo AC Bianchi , Paulo E Santos , and Ramon Lopez de Mantaras .
2017 .
Answer set programming for non - stationary markov decision processes .
Applied Intelligence , 47(4):993 – 1007.Michael Gelfond and Yulia Kahl .
2014 .
Knowledge Representation , Reasoning , and the Design of Intelligent Agents : The Answer - Set Programming Approach .
Cambridge University Press .
Michael Gelfond and Vladimir Lifschitz .
1988 .
The Stable Model Semantics for Logic Programming .
InInternational Conference on Logic Programming , pages 1070–1080 .
Marc Hanheide , Moritz G ¨obelbecker , Graham S Horn , et al . 2017 .
Robot task planning and explanation in open and uncertain worlds .
Artiﬁcial Intelligence , 247:119–150 .
Yuqian Jiang , Shiqi Zhang , Piyush Khandelwal , and Peter Stone .
2019 .
Task planning in robotics : an empirical comparison of pddl- and asp - based systems .
Frontiers of Information Technology & Electronic Engineering , 20(3):363–373 .
Leslie Pack Kaelbling , Michael L Littman , and Anthony R Cassandra .
1998 .
Planning and acting in partially observable stochastic domains .
Artiﬁcial Intelligence , 101(1):99–134 .
Piyush Khandelwal , Shiqi Zhang , Jivko Sinapov , et al . 2017 .
Bwibots : A platform for bridging the gap between ai and humanrobot interaction research .
The International Journal of Robotics Research , 36(57):635–659 .
Levente Kocsis and Csaba Szepesv ´ ari . 2006 .
Bandit based monte - carlo planning .
In Machine Learning : ECML 2006 , pages 282–293 .
Springer .
Matteo Leonetti , Luca Iocchi , and Peter Stone .
2016 .
A synthesis of automated planning and reinforcement learning for efﬁcient , robust decision - making .
Artiﬁcial Intelligence .
Dongcai Lu , Shiqi Zhang , Peter Stone , and Xiaoping Chen . 2017 .
Leveraging commonsense reasoning and multimodal perception for robot spoken dialog systems .
In 2017 IEEE / RSJ International Conference on Intelligent Robots and Systems ( IROS ) , pages 6582–6588 .
IEEE .
Drew McDermott , Malik Ghallab , Adele Howe , Craig Knoblock , Ashwin Ram , Manuela Veloso , Daniel Weld , and David Wilkins .
1998 .
Pddl - the planning domain deﬁnition language .
Sanmit Narvekar , Jivko Sinapov , and Peter Stone .
2017 .
Autonomous task sequencing for customized curriculum design in reinforcement learning .
In Proceedings of IJCAI .
Jean Oh , Arne Supp ´ e , Felix Duvallet , Abdeslam Boularias , Luis Navarro - Serment , Martial Hebert , Anthony Stentz , Jerry Vinokurov , Oscar Romero , Christian Lebiere , et al . 2015 .
Toward mobile robots reasoning like humans .
In AAAI .
Takayuki Osa , Joni Pajarinen , Gerhard Neumann , J Andrew Bagnell , Pieter Abbeel , Jan Peters , et al . 2018 .
An algorithmic perspective on imitation learning .
Foundations and Trends in Robotics , 7(1 - 2):1–179 .
Martin L Puterman .
1994 .
Markov decision processes : discrete stochastic dynamic programming .
John Wiley & Sons .
Morgan Quigley , Ken Conley , Brian Gerkey , Josh Faust , Tully Foote , Jeremy Leibs , Rob Wheeler , and Andrew Y Ng . 2009 .
Ros : an open - source robot operating system .
In ICRA workshop on open source software .
Matthew Richardson and Pedro Domingos .
2006 .
Markov logic networks .
Machine learning , 62(1):107–136 .
Mohit Shridhar , Jesse Thomason , Daniel Gordon , Yonatan Bisk , Winson Han , Roozbeh Mottaghi , Luke Zettlemoyer , and Dieter Fox . 2020 .
Alfred : A benchmark for interpreting grounded instructions for everyday tasks .
In Computer Vision and Pattern Recognition ( CVPR ) .
Mohan Sridharan , Michael Gelfond , Shiqi Zhang , and Jeremy Wyatt .
2019 .
Reba :
A reﬁnement - based architecture for knowledge representation and reasoning in robotics .
Journal of Artiﬁcial Intelligence Research , 65:87–180 .
Mohan Sridharan , Ben Meadows , and Rocio Gomez . 2017 .
What can i not do ? towards an architecture for reasoning about and learning affordances .
In ICAPS .
Richard S Sutton .
1990 .
Integrated architectures for learning , planning , and reacting based on approximating dynamic programming .
In ICML .
Richard S Sutton and Andrew G Barto .
2018 .
Reinforcement learning : An introduction .
MIT press .
Moritz Tenorth and Michael Beetz .
2013 .
Knowrob : A knowledge processing infrastructure for cognitionenabled robots .
The International Journal of Robotics Research , 32(5):566–590.Jesse Thomason , Aishwarya Padmakumar , Jivko Sinapov , Nick Walker , Yuqian Jiang , Harel Yedidsion , Justin Hart , Peter Stone , and Raymond Mooney . 2020 .
Jointly improving parsing and perception for natural language commands through human - robot dialog .
Journal of Artiﬁcial Intelligence Research , 67:327–374 .
Manuela M Veloso .
2018 .
The increasingly fascinating opportunity for human - robot - ai interaction : The cobot mobile service robots .
Yi Wang , Shiqi Zhang , and Joohyung Lee . 2019 .
Bridging commonsense reasoning and probabilistic planning via a probabilistic action language .
In the 35th International Conference on Logic Programming ( ICLP ) .
Fangkai Yang , Daoming Lyu , Bo Liu , and Steven Gustafson .
2018 .
PEORL : integrating symbolic planning and hierarchical reinforcement learning for robust decision - making .
In IJCAI .
Steve Young , Milica Gai , Blaise Thomson , and Jason D. Williams .
2013 .
Pomdp - based statistical spoken dialog systems : A review .
Proceedings of the IEEE , 101(5):1160–1179 . Vinicius Zambaldi , David Raposo , Adam Santoro , et al . 2018 .
Relational deep reinforcement learning .
arXiv preprint arXiv:1806.01830 .
Shiqi Zhang , Piyush Khandelwal , and Peter Stone . 2017 .
Dynamically constructed ( po ) mdps for adaptive robot planning .
In Proceedings of the ThirtyFirst AAAI Conference on Artiﬁcial Intelligence , pages 3855–3862 .
Shiqi Zhang and Peter Stone .
2015 .
CORPP : Commonsense reasoning and probabilistic planning , as applied to dialog with a mobile robot .
In AAAI .
